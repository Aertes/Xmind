# Godzillaä¼ä¸šçº§å‰ç«¯åº”ç”¨æ¡†æ¶

## 1.èƒŒæ™¯

- å‰ç«¯å•ä½“åº”ç”¨è¶Šæ¥è¶Šå¤æ‚ï¼Œæ…¢æ…¢å˜æˆä¸€ä¸ªå·¨çŸ³åº”ç”¨ã€‚å¾®å‰ç«¯ç†å¿µåº”è¿è€Œç”Ÿï¼Œå¾®å‰ç«¯ç±»ä¼¼åç«¯çš„å¾®æœåŠ¡æ¦‚å¿µï¼Œå°†å¤æ‚å‰ç«¯åº”ç”¨æ‹†æˆå¤šä¸ªç‹¬ç«‹çš„å­åº”ç”¨ï¼Œæ”¯æŒç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²å’Œå‡çº§ï¼Œå…¼å®¹å¤šç§æŠ€æœ¯æ ˆï¼Œæœ€åå°†å­åº”ç”¨æ•´åˆèµ·æ¥å¹¶ä¸”æ”¯æŒåº”ç”¨é—´çš„äº’ç›¸é€šè®¯ã€‚åœ¨ä¼ ç»Ÿå‰ç«¯ä¸šåŠ¡å¼€å‘â¾¯ä¸´çš„é—®é¢˜ å•ä½“åº”â½¤ä½“ç§¯è¿‡â¼¤ ï¼šä¸šåŠ¡é›†ä¸­ï¼Œä¸šåŠ¡åˆ†â½€ä¼—å¤šï¼Œä¸šåŠ¡å¤æ‚åº¦ä¸æ–­ä¸Šâ»“ï¼ŒåŒ…ä½“ç§¯ä¸æ–­å˜â¼¤ æ›´æ–°é¢‘ç¹â¾®å¸¸â¾¼ ï¼šæ¯ä¸ªä¸šåŠ¡åˆ†â½€éƒ½æœ‰â¾ƒâ¼°çš„æ›´æ–°é¢‘ç‡ï¼Œå‘å¸ƒé¢‘ç‡çš„æ€»å’Œä¼šâ¾®å¸¸â¾¼ã€â¾®å¸¸é¢‘ç¹ ä¸Šçº¿æ…¢ä¸”æˆæœ¬å¾ˆâ¾¼ ï¼šæ¯æ¬¡åˆ†â½€å‡çº§éƒ½åŠ¡å¿…è”åŠ¨æ•´ä¸ªé¡¹â½¬è¿›â¾å‡çº§ï¼Œæµ‹è¯•ã€ä¸Šçº¿çš„æˆæœ¬å·¨â¼¤ æ¶æ„éš¾ä»¥å‡çº§ ï¼šé¡¹â½¬è¶Šâ¼¤ï¼Œçµæ´»æ€§è¶Šå·®ï¼Œæ¶æ„è°ƒæ•´çš„å¯èƒ½æ€§è¶Šâ¼© åœ¨é“¶è¡Œã€åŸºé‡‘ã€åˆ¸å•†ç­‰é‡‘èæœºæ„å·¥ä½œé¢†åŸŸæœ‰ä¼—å¤šä¸šåŠ¡æ¿å—ï¼Œç³»ç»Ÿç®¡ç†ã€ç»„åˆç®¡ç†ã€æŒ‡ä»¤ç®¡ç†ã€â½‡ç»ˆç®¡ç†ã€ â»›æ§ç®¡ç†ã€ä¼°å€¼ç®¡ç†ï¼Œæœ‰çš„é¡¹ç›®å•é¡¹â½¬å‰ç«¯ä»£ç é‡å·²è¶…å‡ åä¸‡â¾ã€‚ æ¯ä¸ªä¸šåŠ¡åˆ†â½€æœ‰â¾ƒâ¼°çš„éœ€æ±‚åŠ bug ä¿®å¤å†åŠ ä¸Šâ½¤æˆ·éœ€æ±‚ç¬¬â¼€æ—¶é—´å“åº”ï¼Œç‰ˆæœ¬å‘å¸ƒè®¡åˆ’ å½¢åŒè™šè®¾ï¼Œç´§æ€¥å‘ç‰ˆè¯´æ¥å°±æ¥ã€‚â¼€å‘¨5æ¬¡ç´§æ€¥å‘ç‰ˆä½ èƒ½å¿ï¼Ÿ â¼€æ¬¡ç´§æ€¥ä¿®å¤ï¼Œç‰µâ¼€å‘â½½åŠ¨å…¨èº«ã€‚å¼€å‘â½†æ³•è¯„ä¼°å½±å“èŒƒå›´ã€æµ‹è¯•æµ‹ä¸å®Œã€è¿ç»´é€šå®µå‘ å¸ƒã€‚ é¡¹â½¬å¤ªâ¼¤ï¼Œæ¶æ„å‡çº§â»›é™©â¾®å¸¸â¾¼ï¼Œæ¶æ„è¶Šæ¥è¶Šéš¾åŠ¨ï¼Œå¼€å‘â¼ˆå‘˜ä½“éªŒå˜å·®ã€‚ æ¨¡å—é—´å­˜åœ¨è—•åˆï¼Œå®¹æ˜“å¯¼è‡´å…¬â½¤èµ„æºã€ä»£ç å†²çªï¼Œå„æ¨¡å—å¼€å‘â¼ˆå‘˜éš¾ä»¥è€ƒè™‘ä¸ç›¸å…³æ¨¡å— å…¼å®¹æ€§ã€‚ å›¢é˜Ÿâ¼ˆå‘˜å®¹æ˜“è¾¾åˆ°ç“¶é¢ˆï¼ŒåŠ â¼Šæ›´å¤šçš„â¼ˆä¹Ÿâ½†æ³•æœ‰æ•ˆå‘æŒ¥ä»·å€¼ï¼Œç®¡ç†è€…ç®¡ä¸è¿‡æ¥ã€‚ æ‰©å……â¼ˆå‘˜â¼—åˆ†å›°éš¾ï¼Œâ¾¯å¯¹åºâ¼¤çš„åº”â½¤ä½“ç³»ï¼Œéš¾ä»¥ç†è§£ï¼Œâ½†æ³•å¿«é€Ÿä¸Šâ¼¿ã€‚

---

## 2.æ•´ä½“ä»‹ç»

- Godzillaï¼Œä¸­æ–‡å¯å‘éŸ³ä¸ºå“¥æ–¯æ‹‰ï¼Œæ˜¯ä¸€ä¸ªé«˜åº¦é›†æˆçš„ä¼ä¸šçº§ React å¾®å‰ç«¯åº”ç”¨æ¡†æ¶ã€‚Godzilla ä»¥è·¯ç”±ä¸ºåŸºç¡€ï¼Œæ”¯æŒçº¦å®šå¼è·¯ç”±ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒè·¯ç”±çº§çš„æŒ‰éœ€åŠ è½½ï¼Œæ”¯æŒå¾®å‰ç«¯ï¼Œæ”¯æŒåµŒå…¥å­åº”ç”¨ã€‚ ç„¶åé…ä»¥å®Œå–„çš„å·¥ä½œå°ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ï¼Œç›®å‰å·²æœ‰ 40+ï¼ˆå°è£…æˆ–è€…è‡ªç ”ï¼‰ç»„ä»¶ã€‚
- Godzilla æ˜¯åº•å±‚å‰ç«¯æ¡†æ¶ï¼Œå·²ç›´æ¥æˆ–è€…é—´æ¥çš„æœåŠ¡äº†å¾ˆå¤šå‰ç«¯åº”ç”¨ã€‚ä»–å·²ç»å¾ˆå¥½åœ°æœåŠ¡äº†æˆ‘ä»¬çš„å†…éƒ¨ç”¨æˆ·ï¼ŒåŒæ—¶å¸Œæœ›ä»–ä¹Ÿèƒ½æœåŠ¡å¥½å¤–éƒ¨ç”¨æˆ·ã€‚
- é¢å¯¹è¿™æ ·çš„è¡Œä¸šå‘å±•èƒŒæ™¯å’Œç‰¹ç‚¹ï¼Œå®½æ‹“æå‡ºäº†è‡ªå·±çš„å‰ç«¯æ¡†æ¶è§£å†³æ–¹æ¡ˆGodzillaï¼ŒGodzilla æ¡†æ¶é›†æˆäº†å¾®å‰ç«¯ã€å·¥ä½œå°ç»„è£…ç­‰å‰æ²¿æŠ€æœ¯ï¼Œå¹¶é’ˆå¯¹èµ„ç®¡ç±»ä¸šåŠ¡å°è£…äº†ä¼—å¤šä¸šåŠ¡ç»„ä»¶ï¼Œå¸®åŠ©å‰ç«¯å·¥ç¨‹å¸ˆå¿«é€Ÿæ„å»ºé¡¹ç›®ï¼ŒåŠ é€Ÿé¡¹ç›®è¿­ä»£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå‰ç«¯å¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨Godzillaé«˜æ•ˆå®ç°æ—§ç³»ç»Ÿæ•´åˆã€å¼‚æ„æŠ€æœ¯æ•´åˆï¼Œæ‰“é€ ç»Ÿä¸€ç”¨æˆ·ä½“éªŒï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜åº¦é›†æˆçš„ä¼ä¸šçº§ React å¾®å‰ç«¯åº”ç”¨æ¡†æ¶ã€‚Godzilla ä»¥è·¯ç”±ä¸ºåŸºç¡€ï¼Œæ”¯æŒçº¦å®šå¼è·¯ç”±ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒè·¯ç”±çº§çš„æŒ‰éœ€åŠ è½½ï¼Œæ”¯æŒå¾®å‰ç«¯ï¼Œæ”¯æŒåµŒå…¥å­åº”ç”¨ã€‚ ç„¶åé…ä»¥å®Œå–„çš„å·¥ä½œå°ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ï¼Œç›®å‰å·²æœ‰ 40+ï¼ˆå°è£…æˆ–è€…è‡ªç ”ï¼‰ç»„ä»¶ã€‚

![](images/Godzilla%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6.png)

---

## 3.ç‰¹æ€§

- [ğŸ“¦ **å¼€ç®±å³ç”¨**ï¼Œä½¿ç”¨è„šæ‰‹æ¶ä¸€é”®ç”Ÿæˆé¡¹ç›®ï¼Œå†…ç½® reactã€react-routerã€mobxã€antd ç­‰](###4.è„šæ‰‹æ¶ä¸€é”®ç”Ÿæˆå®Œæ•´é¡¹ç›®)ã€‚
- [ğŸˆ **è·¯ç”±å’Œèœå•çš„ç®¡ç†**ï¼Œæ”¯æŒé…ç½®çš„è·¯ç”±å’Œèœå•æ–¹å¼](###6.è·¯ç”±å’Œèœå•çš„ç®¡ç†)ã€‚
- [ğŸ‰ **å®Œå–„çš„ç»„ä»¶ä½“ç³»**ï¼Œè¦†ç›–äº†è¡¨æ ¼ã€è¡¨å•ã€æ¨¡æ€æ¡†ç­‰ç»„ä»¶](##7.å®Œå–„çš„ç»„ä»¶ä½“ç³»)ã€‚
- [ğŸ›  **å…¬å…±çš„å·¥å…·ç±»åº“**ï¼Œå°è£…å¯¹æµè§ˆå™¨çš„å­˜å‚¨ï¼Œç»Ÿä¸€çš„APIè¯·æ±‚æ–¹å¼ï¼Œå…¶ä»–é€šç”¨æ–¹æ³•ç­‰å¸¸ç”¨å·¥å…·](##8.å…¬å…±çš„å·¥å…·ç±»åº“)ã€‚
- [ğŸ‘¨ğŸ»â€ğŸ’» **æ”¯æŒå¾®å‰ç«¯**ï¼Œå¤šåº”ç”¨ç‹¬ç«‹éƒ¨ç½²ï¼Œç»Ÿä¸€é—¨æˆ·ï¼Œå¤šå›¢é˜Ÿç‹¬ç«‹å¼€å‘ï¼Œç ”å‘è¿‡ç¨‹ä¸­è§„èŒƒçš„çº¦æŸï¼Œé™ä½ç»´æŠ¤æˆæœ¬å’Œæå‡ååŒåŠä»£ç çš„è´¨é‡ï¼Œæé«˜å¼€å‘æ•ˆç‡](###9.æ”¯æŒå¾®å‰ç«¯)ã€‚
- [ğŸ–¥ **å†…ç½®å·¥ä½œå°**ï¼Œè‡ªå®šä¹‰å·¥ä½œå°å¸ƒå±€ï¼Œæ”¯æŒå„ç§æ‹–æ‹‰æ‹½](###10.ä¸ªæ€§åŒ–å·¥ä½œå°)ã€‚
- [âœ¨ **ä¸ªæ€§åŒ–çš„ä¸»é¢˜å¼€å‘**ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜é£æ ¼çš„åˆ‡æ¢æ¨¡å¼](###11.ä¸»é¢˜å¼€å‘)ã€‚
- [âš¡ï¸ **æœåŠ¡ç«¯çš„äº¤äº’é›†æˆYapiæ¥å£ç®¡ç†å¹³å°å’Œæœ¬åœ°Mock**ï¼ŒMockå®šä¹‰æ¥å£çš„è¿”å›ï¼Œæ”¯æŒ postman, har, swagger æ•°æ®å¯¼å…¥ï¼Œæ¥å£çš„è‡ªåŠ¨åŒ–æµ‹è¯•](####12.æœåŠ¡ç«¯çš„äº¤äº’)ã€‚

![](images/GZA%E7%89%B9%E6%80%A7-578769ff6521c69de44d26d6bfd5c125.png)

---

## 4.è„šæ‰‹æ¶ä¸€é”®ç”Ÿæˆå®Œæ•´é¡¹ç›®

#### 4.1.è®¾ç½® npm é•œåƒä»“åº“

- ä¾èµ– node10.x åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæˆ‘ä»¬é»˜è®¤æ‚¨å·²ç»å®‰è£… node ç¯å¢ƒï¼Œå¦‚æœæ‚¨æœ¬åœ°æ²¡æœ‰å®‰è£… node ç¯å¢ƒï¼Œè¯·[å®‰è£…](https://nodejs.org/zh-cn/)

```shell
npm login -registry=https://artifact.iquantex.com/repository/npm-local/ -scope=@gza
- Username: ã€npm userã€‘
- Password: ã€npm passwordã€‘
- Email: ã€your emailã€‘
```

#### 4.2.å…¨å±€å®‰è£… @gza/create-godzilla-app

```shell
npm i -g @gza/create-godzilla-app@latest
```

#### 4.3.ä½¿ç”¨`gza`å‘½ä»¤åˆ›å»ºé¡¹ç›®

```shell
gza init godzilla-portal # åˆå§‹åŒ–UIåº”ç”¨ï¼Œ`godzilla-portal` is your project name
cd godzilla-portal
npm start
```

- æ‰“å¼€æµè§ˆå™¨ [http://127.0.0.1:8888](http://127.0.0.1:8888/) è¾“å…¥ç”¨æˆ·åå¯†ç ï¼ˆä»»æ„ï¼‰å³å¯è¿›å…¥ç³»ç»Ÿ

![](images/create_godzilla_app.png)

#### 4.4.é¡¹ç›®ç»“æ„

```shell
â”œâ”€â”€ README.md                  é¡¹ç›®README
â”œâ”€â”€ app                        åº”ç”¨ç›®å½•
â”‚Â Â  â”œâ”€â”€ pages                  ä¸šåŠ¡ç»„ä»¶ç›®å½•ï¼Œçº¦å®šè¯¥ç›®å½•ä¸‹ç¼–å†™ä¸šåŠ¡ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ layouts                layoutè®¾ç½®
â”‚Â Â  â”œâ”€â”€ globals.d.ts           å…¨å±€tsé…ç½®æ–‡ä»¶
â”‚Â Â  â””â”€â”€ index.d.ts             å…¶ä»–tsé…ç½®æ–‡ä»¶
â”œâ”€â”€ config
â”‚Â Â  â””â”€â”€ config.ts              é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ devops                     éƒ¨ç½²æ–‡ä»¶
â”œâ”€â”€ dist                       æ‰“åŒ…ç›®å½•
â”œâ”€â”€ docker                     dockeré…ç½®ç›®å½•
â”‚Â Â  â”œâ”€â”€ Dockerfile
â”‚Â Â  â””â”€â”€ nginx.conf
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ .editorconfig              ç¼–è¾‘å™¨è®¾ç½®
â”œâ”€â”€ .eslintignore              eslint ignore
â”œâ”€â”€ .eslintrc.js               eslint é…ç½®æ–‡ä»¶ã€‚å·²æŒ‰å¼€å‘è§„èŒƒç”Ÿæˆäº†å¯¹åº”çš„è¯¦ç»†é…ç½®ï¼Œæ— éœ€å†è¿›è¡Œæ‰‹åŠ¨é…ç½®ï¼Œè·¨é¡¹ç›®ç»Ÿä¸€ã€‚
â”œâ”€â”€ .gitignore                 git ignore
â”œâ”€â”€ .npmignore                 npm ignore
â”œâ”€â”€ .prettierrc.js             ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–é…ç½®æ–‡ä»¶ã€‚å·²æŒ‰å¼€å‘è§„èŒƒç”Ÿæˆäº†å¯¹åº”çš„è¯¦ç»†é…ç½®ï¼Œæ— éœ€å†è¿›è¡Œæ‰‹åŠ¨é…ç½®ï¼Œè·¨é¡¹ç›®ç»Ÿä¸€ã€‚
â”œâ”€â”€ .stylelintrc.js            cssã€lessã€scssæ ·å¼æ ¼å¼åŒ–é…ç½®ã€‚å·²æŒ‰å¼€å‘è§„èŒƒç”Ÿæˆäº†å¯¹åº”çš„è¯¦ç»†é…ç½®ï¼Œæ— éœ€å†è¿›è¡Œæ‰‹åŠ¨é…ç½®ï¼Œè·¨é¡¹ç›®ç»Ÿä¸€ã€‚
â”œâ”€â”€ tests                      æµ‹è¯•ç›®å½•
â””â”€â”€ tsconfig.json              TypeScript é…ç½®æ–‡ä»¶
```

- çº¦å®šåœ¨app/pagesåº”ç”¨ç›®å½•ä¸‹ç¼–å†™é¡µé¢ï¼Œçº¦å®šå¼è·¯ç”±ä¼šåœ¨pagesç›®å½•ä¸‹æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶é¡µé¢ã€‚
- çº¦å®šåœ¨app/layouts/index.ts æ–‡ä»¶ä¸‹ï¼Œé…ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒçš„èœå•å’Œè·¯ç”±ã€‚

```javascript
import defaultLayouts from '@/containers/defaultLayouts';
import { cloneDeep } from 'lodash';
const layouts = cloneDeep(defaultLayouts);
// é…ç½®èœå•
layouts.main.getUserMenu = () => {
  return Promise.resolve({
    code: 200,
    data: {
      list: [
        // ä¸€çº§èœå•
        {
          id: 100,  // å­èœå• IDï¼Œè®¾ç½®ä¸ºä¸€çº§èœå•æ—¶ä¸ä¸€çº§èœå•IDä¸€è‡´
          pId: 100, // ä¸€çº§èœå• ID
          icon: 'chanpinguanli',
          appId: 'portal', // åº”ç”¨IDï¼Œä¸ UI åº”ç”¨ config / config.ts å±æ€§ APP_ID çš„å€¼ä¸€è‡´
          name: 'ç³»ç»Ÿç®¡ç†', // èœå•åç§°
        },
        // å­èœå•
        {
          id: 101,
          pId: 100,
          appId: 'portal',
          name: 'Application',
          url: 'portal/system/Application',
        },
        // å­èœå•
        {
          id: 102,
          pId: 100,
          appId: 'portal',
          name: 'Menu',
          url: 'portal/system/Menu',
      ],
    },
    msg: 'æ“ä½œæˆåŠŸï¼',
  });
};
export default layouts;
```

- é¡¹ç›®é…ç½®æ–‡ä»¶config/config.ts æ˜¯çº¦å®šäº†é¡¹ç›®çš„å¯åŠ¨ç«¯å£å·ï¼Œè¯·æ±‚APIçš„åœ°å€ï¼Œæœ¬åœ°mockåœ°å€æˆ–Yapiçš„æœåŠ¡ï¼Œç¼–è¯‘è·¯å¾„çš„åˆ«åï¼Œä¸ªæ€§åŒ–ä¸»é¢˜çš„é…ç½®ï¼Œä»¥åŠä¸€äº›åŠŸèƒ½æ’ä»¶çš„é…ç½®ã€‚

```javascript
import {IConfig} from '@/types';
// æ³¨æ„ï¼ï¼ä¿®æ”¹è¯¥é…ç½®æ–‡ä»¶ä¸ä¼šçƒ­æ›´æ–°ï¼Œéœ€è¦é‡æ–°æ‰§è¡Œnpm start
const npmScope = '@gza'; // ç§æœ‰npmä¾èµ–çš„scope
const isDev = process.env.NODE_ENV === 'development';

const config: IConfig = {
  systemConfig: {
    devServerPort: 8888, // dev server ç«¯å£
    isPortal: true,
    npmScope: npmScope,
    godzillaLicenseKey: 'quantex__2020_4_6_[TRIAL]_MTU4NjE4NTk0NTk5MQ==9053b0c05f8a201c1275e62579d7326f',
    agGridLicenseKey: 'China_Merchants_Bank__multi_1_Devs__7_November_2020_[v2]_MTYwNDcwNzIwMDAwMA==fe663629062117b3018166f309ca7e9a',
  },
  apiConfig: {
    isDebug: true,
    // æœ¬åœ°mockåœ°å€
    base: isDev ? 'http://127.0.0.1:8888' : '',
    domain: {},
  },
  yapiConfig:{
    // å¯åŠ¨ä½¿ç”¨
    enable: false,
    // yapiç½‘ç«™è·¯å¾„ï¼Œå¦‚ï¼šhttps://yapi.iquantex.comï¼Œå¯ä»¥æ˜¯å†…éƒ¨éƒ¨ç½²çš„é“¾æ¥åœ°å€
    host: 'https://yapi.iquantex.com',
    // éœ€è¦ mock çš„é¡¹ç›® token
    token: 'e242af77e127a96f8b8eaa0fd92f276b0f2931cd9a73c60d438a1f79378f7ab3',
    // å¯åŠ¨è‡ªåŠ¨æ›´æ–°æ¥å£åŠŸèƒ½
    autoUpdate: true,
    // é—´éš”æ—¶é—´ï¼Œé»˜è®¤äº”åˆ†é’Ÿ
    interval: 5 * 60 * 1000,
  },
  definePlugin: {
    ENABLE_SSO: false, // æ˜¯å¦åªå…è®¸ssoç™»å½•
    APP_ID: JSON.stringify('portal'), // åº”ç”¨ID
    PROJECT_NAME: JSON.stringify('Godzilla é—¨æˆ·'), // åº”ç”¨åç§°
  },
  webpackConfig: {
    // å¼•å…¥æ–‡ä»¶è·¯å¾„çš„åˆ«å
    resolveAlias: {
      'quantex-utils': `${npmScope}/quantex-utils`,
      'quantex-design': `${npmScope}/quantex-design`,
      'quantex-scripts': `${npmScope}/quantex-scripts`,
      'quantex-scaffold': `${npmScope}/quantex-scaffold`,
    },
  },
  // ä¸ªæ€§åŒ–ä¸»é¢˜çš„é…ç½®
  themeConfig: {
    // é»˜è®¤æ˜¯æ·±è‰²ä¸»é¢˜
    defaultTheme: 'themeDark',
    mainTheme: 'themeDark',
    themes: [
      {
        name: 'æ·±è‰²',
        id: 'themeDark',
        path: '@gza/quantex-plugin-theme-dark',
        chartConfig: '@gza/quantex-plugin-theme-dark/chart.js',
      },
      // è‡ªå®šä¹‰ä¸»é¢˜é…ç½®
      {
        name: 'CICCä¸»é¢˜',
        id: 'themeCiccWhite',
        path: '@gza/quantex-plugin-theme-cicc-white',
        chartConfig: '@gza/quantex-plugin-theme-cic'
      }
    ],
  },
  pluginConfig: [
    [
      'theme-dark',
      {
        package: '@gza/quantex-plugin-theme-dark',
      },
    ],
    [
      'theme-cic',
      {
        package: '@gza/quantex-plugin-theme-cicc-white',
      },
    ],
    // è‡ªå®šä¹‰åŠŸèƒ½æ’ä»¶é…ç½®
    // åŸ‹ç‚¹ä¸ŠæŠ¥æ’ä»¶,è¦é…åˆåç«¯æœåŠ¡æ¥æ”¶åŸ‹ç‚¹æ•°æ®å¹¶è¿›è¡Œåˆ†æ
    [
      'metrics',
      {
        enable: true, // æ˜¯å¦å¯ç”¨
        domain: 'http://10.16.18.166:32143', // ä¸ŠæŠ¥æœåŠ¡åœ°å€
        url: '/api/v1/metrics', // ä¸ŠæŠ¥url
        method: 'POST', // http method
        env: 'DEV', // STã€UATã€PRDç­‰
        reportInterval: 10 * 1000, // ä¸€åˆ†é’Ÿä¸ŠæŠ¥ä¸€æ¬¡
        package: '@gza/quantex-plugin-metrics'
      }
    ],
  ],
};
module.exports = config;
```

---

## 5.Godzillaæ¶æ„å›¾

![Godzilla æ¶æ„å›¾](images/conception-9568d39dc0034f1fb1b89d00877e1579.png)

#### 	5.1å‰ç«¯ä¸­å°åº”ç”¨å¸ƒå±€å›¾

![å‰ç«¯ä¸­å°åº”ç”¨å¸ƒå±€å›¾](images/webAppStructure-c49511ea5016a2d71af0396cc5c23cd1.png)

---

## 6.è·¯ç”±å’Œèœå•çš„ç®¡ç†

#### 6.1.æ¦‚è¿°

è·¯ç”±å’Œèœå•æ˜¯ç»„ç»‡èµ·ä¸€ä¸ªåº”ç”¨çš„å…³é”®éª¨æ¶ï¼ŒGodzilla UI ä¸­çš„è·¯ç”±ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œä½¿ç”¨çº¦å®šå¤§äºé…ç½®çš„æ–¹å¼ï¼Œè„šæ‰‹æ¶ä¼šè‡ªåŠ¨æ ¹æ® `app/pages` ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®ï¼Œåº”ç”¨å¼€å‘æ— éœ€å…³å¿ƒå…·ä½“ç»†èŠ‚ã€‚

åœ¨å¤šåº”ç”¨çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œèœå•è·¯ç”±çš„é…ç½®åˆ†ä¸ºæœ¬åœ°å¼€çš„jsoné…ç½®å’Œç”Ÿäº§ç¯å¢ƒä¸­çš„æ•°æ®åº“é…ç½®ã€‚

#### 6.2.æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­çš„jsoné…ç½®

```javascript
layouts.main.getUserMenu = () => {
  return Promise.resolve({
    code: 200,
    data: {
      list: [
        // ä¸€çº§èœå•
        {
          "id": 1,              // å­èœå• IDï¼Œè®¾ç½®ä¸ºä¸€çº§èœå•æ—¶ä¸ä¸€çº§èœå•IDä¸€è‡´
          "pId": 1,             // ä¸€çº§èœå• ID
          "name": "ä¸€çº§èœå•",   // èœå•åç§°
          "icon": "icon",
          "appId": "appId",     // åº”ç”¨IDï¼Œä¸ UI åº”ç”¨ config / config.ts å±æ€§ APP_ID çš„å€¼ä¸€è‡´
        },
        // å­èœå•
        {
          "id": 2,              // å­èœå• ID
          "pId": 1,             // ä¸€çº§èœå• ID
          "name": "å­èœå•",     // èœå•åç§°
          "appId": "appId",     // åº”ç”¨IDï¼Œä¸ UI åº”ç”¨ config / config.ts å±æ€§ APP_ID çš„å€¼ä¸€è‡´
          "url": "system/ServiceProxy"
        }
      ],
    },
    msg: 'æ“ä½œæˆåŠŸï¼',
  });
};
```

#### 6.3.ç”Ÿäº§ç¯å¢ƒä¸­é…ç½®èœå•è·¯ç”±

- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé€šè¿‡ç®¡ç†å¹³å°æ¥é…ç½®é¡¹ç›®çš„èœå•å’Œè·¯ç”±ï¼Œä»¥åŠä¸åŒç”¨æˆ·å¯¹èœå•çš„æƒé™é…ç½®ã€‚
- ç¤ºä¾‹ï¼Œæ·»åŠ ä¸€çº§èœå•ã€‚

![image-20220814164150096](images/image-20220814164150096.png)

- è®¾ç½®èœå•çš„å±æ€§å’Œå…³è”è·¯ç”±åœ°å€

![](images/%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E4%B9%8B%E5%B7%A6%E5%8F%B3%E7%BB%93%E6%9E%84_%E5%B7%A6%E5%88%97%E8%A1%A8+%E5%8F%B3%E5%86%85%E5%AE%B9%E6%94%B9-7a3fac967ce23ea58f8e7659f27d1e29.png)

---

## 7.å®Œå–„çš„ç»„ä»¶ä½“ç³»

#### 7.1.æ¦‚è¿°

Godzilla å†…ç½®äº†ä¸€å¥—åŸºäºant-designçš„äºŒæ¬¡å¼€å‘çš„ç»„ä»¶åº“ï¼Œæä¾›äº†ä¸°å¯Œçš„åŸºç¡€ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶æ¥æ»¡è¶³æ—¥å¸¸å¼€å‘ã€‚

#### 7.2.åŸºç¡€ç»„ä»¶åº“

![image-20220814165436826](images/image-20220814165436826.png)

#### 7.3.ä¸šåŠ¡ç»„ä»¶åº“

![image-20220814165603169](images/image-20220814165603169.png)

#### 7.4.äºŒæ¬¡å°è£…çš„tableç»„ä»¶ç¤ºä¾‹

![image-20220814165821959](images/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16595770452538.png)

#### 7.5.ä¸°å¯Œçš„ç»„ä»¶åº“åº”ç”¨äºå¤æ‚åœºæ™¯ä¸šåŠ¡

- åœ¨èµ„ç®¡é¢†åŸŸï¼Œæœ‰å¾ˆå¤šå¤æ‚çš„ä¸šåŠ¡ï¼Œè¿™äº›ä¸šåŠ¡å¤æ‚åº¦ä¸»è¦ä½“ç°åœ¨å¤æ‚çš„æµç¨‹ç®¡ç†ï¼Œæ¯”å¦‚ä¸€æ¡æŒ‡ä»¤ï¼Œä»æŒ‡ä»¤åˆ›å»ºã€åˆ°æŒ‡ä»¤å®¡æ‰¹ã€åˆ°æŒ‡ä»¤æ‰§è¡Œï¼Œä¸­é—´è¦ç»è¿‡å¾ˆå¤šç¯èŠ‚ï¼Œè€Œä¸”ä¹Ÿæœ‰å¾ˆå¤šçš„ä¸šåŠ¡æ–¹å‚ä¸ï¼Œå®Œæˆè¿™ä¹ˆä¸€å¥—å¤æ‚çš„æµç¨‹ï¼Œå¯¹æ•´ä¸ªç³»ç»Ÿçš„æ¶æ„æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚Godzillaé‡‡ç”¨ç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œå¹¶æç‚¼äº†å¾ˆå¤šé’ˆå¯¹å¤æ‚åœºæ™¯çš„ä¸šåŠ¡ç»„ä»¶ï¼Œç»„ä»¶å¯è‡ªç”±ç»„åˆä¸æ‹¼æ¥ï¼Œå¸®åŠ©å¼€å‘äººå‘˜é™ä½å¤æ‚åº¦ã€‚

![](images/%E5%AE%BD%E6%8B%93PMS%E7%BB%84%E5%90%88%E7%AE%A1%E7%90%86%E5%9B%BE-623051d5de84f9b757faf78e83d92dd0.png)

---

## 8.å…¬å…±çš„å·¥å…·ç±»åº“

#### 8.1.æ¦‚è¿°

å·¥å…·ç±»åº“æ˜¯åŸºäºä¸€äº›é€šç”¨å¸¸ç”¨çš„æ–¹æ³•çš„å°è£…ğŸ“¦ï¼Œå®ç°å¯¹ä¸šåŠ¡ç»„ä»¶éœ€æ±‚çš„ç›´æ¥å¼€ç®±å³ç”¨ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç çš„ä½è€¦åˆã€‚

#### 8.2.å·¥å…·åº“çš„æ–¹æ³•

- APIï¼šæ˜¯å’Œåç«¯äº¤äº’æ˜¯éå¸¸å¸¸è§çš„ï¼ŒGodzilla UI å°è£…ç½‘ç»œè¯·æ±‚çš„ APIï¼Œæ‰€æœ‰ ajax éƒ½éœ€è¦é€šè¿‡ `API` è¿™ä¸ªç±»æ¥å‘èµ·è°ƒç”¨ï¼Œapi çš„é£æ ¼é‡‡ç”¨ restful apiã€‚
- DBUtilï¼šæ˜¯ä¸€ä¸ªè‡ªåŠ¨è¯†åˆ«è¿è¡Œç¯å¢ƒå¹¶é€‰å–åˆé€‚å­˜å‚¨æ–¹å¼, å¹¶å¯¹å¤–æä¾›ä¸€è‡´ api çš„å­˜å‚¨å·¥å…·åº“ã€‚

  - æµè§ˆå™¨ç¯å¢ƒ: ä½¿ç”¨ IndexedDB å­˜å‚¨
  - Electron ç¯å¢ƒ: ä½¿ç”¨æ–‡ä»¶å­˜å‚¨
  - æä¾› Adaptorï¼šè‡ªå®šä¹‰å­˜å‚¨æ–¹å¼ï¼ˆä¾‹å¦‚å­˜å‚¨åˆ°åå°æ•°æ®åº“ï¼‰
- DoubleUtilï¼šå½“æ¶‰åŠåˆ°é‡‘é¢ç±»çš„å››åˆ™è¿ç®—æ—¶ï¼Œä¸ºäº†é˜²æ­¢ç²¾åº¦ä¸¢å¤±ï¼Œæä¾›ä¸“é—¨çš„å·¥å…·å‡½æ•°ï¼Œæ›´ä¸“ä¸šï¼Œæ›´æœ‰ä¿éšœã€‚
- MsgCenterï¼šé‡‡ç”¨å‘å¸ƒ / è®¢é˜…æ¨¡å¼è®¾è®¡ï¼Œä¸»è¦ä½¿ç”¨åœºæ™¯ï¼š è·¨ç»„ä»¶é€šä¿¡ï¼ˆä¸å»ºè®®åœ¨å·¥ä½œå°ä¸­ä½¿ç”¨ï¼Œ[å·¥ä½œå°å¼€å‘](###10.ä¸ªæ€§åŒ–å·¥ä½œå°)è‡ªå¸¦ä¸“ç”¨çš„é€šä¿¡ï¼‰
- Storeï¼šåº•å±‚ä½¿ç”¨ LocalStorageï¼Œæ”¯æŒæŒ‰ç”¨æˆ·å­˜å‚¨
- ä½¿ç”¨è£…é¥°å™¨ï¼š

  1. @response()

     - ä½¿ç”¨ @response æ—¶åŒ…è£¹è¯·æ±‚æ—¶ï¼Œä¸šåŠ¡ä»£ç ä¸éœ€è¦å¤„ç†æˆåŠŸå¤±è´¥çš„å¼¹çª—å¤„ç†ï¼Œå…¶ä½™é€»è¾‘ä¸å½±å“ã€‚

     - è¢«åŒ…è£¹çš„æ–¹æ³•å¿…é¡»è¿”å›çš„æ˜¯ promise å¯¹è±¡æ‰å¯ä½¿ç”¨æ­¤è£…é¥°å™¨ã€‚

  2. @norepeat()

     - é¿å…é‡å¤æäº¤ï¼Œè¢«åŒ…è£¹çš„æ–¹æ³•å¿…é¡»è¿”å›çš„æ˜¯ promise å¯¹è±¡æ‰å¯ä½¿ç”¨æ­¤è£…é¥°å™¨

  3. @retry()

     - ä½¿ç”¨è£…é¥°å™¨ @retry()ï¼Œå½“è°ƒç”¨æˆåŠŸæ—¶ï¼Œä¼šè¿”å› res å¯¹è±¡
     - å½“è°ƒç”¨è¶…æ—¶(çŠ¶æ€ç  408)ï¼Œå°†å¼¹çª—æ˜¾ç¤º`é‡è¯•`åŠ`ç¨åå¤„ç†`
     - è¢«åŒ…è£¹çš„æ–¹æ³•å¿…é¡»è¿”å›çš„æ˜¯ promise å¯¹è±¡æ‰å¯ä½¿ç”¨æ­¤è£…é¥°å™¨
- å·¥å…·åº“çš„APIä½¿ç”¨çš„ç¤ºä¾‹æºç ï¼ˆAPIç±»å·¥å…·ğŸ”§ï¼‰
  - å°è£…åçš„æ–¹æ³•å¯¼å…¥æ—¢ç”¨ï¼Œå¼€å‘ä»£ç é‡å°‘ï¼Œé€»è¾‘æ¸…æ™°æ˜“æ‡‚ã€‚


```javascript
// ğŸ“¦å°è£…çš„å·¥å…·ç±»æ–¹æ³•å¯¼å…¥
import { API, decorators } from '@gza/quantex-utils';

const { response } = decorators;
class Store {
  // ç›´æ¥å®ä¾‹ï¼Œè°ƒå–api ä¸‹çš„è¯·æ±‚æ–¹æ³•
  api = new API('auth');

  // åœ¨TSæ¨¡å¼ä¸‹ï¼Œè£…é¥°å™¨ä¸æ”¯æŒç®­å¤´å‡½æ•°
  @response('æ–°å¢æˆåŠŸ')
  addServiceProxy(params: object) {
    return this.api.post('/api/v1/service_proxies', params);
  }

  @response('ä¿®æ”¹æˆåŠŸ')
  updateServiceProxy(params: object) {
    return this.api.put('/api/v1/service_proxies/{id}', params);
  }

  @response('åˆ é™¤æˆåŠŸ')
  deleteServiceProxy(params: object) {
    return this.api.delete('/api/v1/service_proxies/{id}', params);
  }
}
export default Store;
```

---

## 9.æ”¯æŒå¾®å‰ç«¯

#### 9.1.æ¦‚è¿°

Godzilla  æ˜¯ä¸€ä¸ªé¢å‘å¤§å‹ç³»ç»Ÿçš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºä»¥ä¸‹ä¸šåŠ¡åœºæ™¯ï¼š

- åå°æ¯”è¾ƒåˆ†æ•£ï¼Œä½“éªŒå·®åˆ«å¤§ï¼Œå› ä¸ºè¦é¢‘ç¹è·³è½¬å¯¼è‡´æ“ä½œæ•ˆç‡ä½ï¼Œå¸Œæœ›èƒ½ç»Ÿä¸€æ”¶å£çš„ä¸€ä¸ªç³»ç»Ÿå†…
- å•é¡µé¢åº”ç”¨éå¸¸åºå¤§ï¼Œå¤šäººåä½œæˆæœ¬é«˜ï¼Œå¼€å‘/æ„å»ºæ—¶é—´é•¿ï¼Œä¾èµ–å‡çº§å›å½’æˆæœ¬é«˜
- ç³»ç»Ÿæœ‰äºŒæ–¹/ä¸‰æ–¹æ¥å…¥çš„éœ€æ±‚

Godzilla åœ¨ä¿è¯ä¸€ä¸ªç³»ç»Ÿçš„æ“ä½œä½“éªŒåŸºç¡€ä¸Šï¼Œå®ç°å„ä¸ªå­åº”ç”¨çš„ç‹¬ç«‹å¼€å‘å’Œå‘ç‰ˆï¼Œæ¡†æ¶åº”ç”¨é€šè¿‡ Lego ç®¡ç†å­åº”ç”¨çš„æ³¨å†Œå’Œæ¸²æŸ“ï¼Œå°†æ•´ä¸ªç³»ç»Ÿå½»åº•è§£è€¦ã€‚

#### 9.2.æ¶æ„è®¾è®¡

![](images/%E5%BE%AE%E5%89%8D%E7%AB%AF-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1-bd185b04e1d5d59f338384e29683399a.png)

- æŒ‰ç…§ UI ç»“æ„è¿›è¡Œæ¡†æ¶åº”ç”¨ã€å­åº”ç”¨çš„æ‹†åˆ†
- æ¡†æ¶åº”ç”¨ï¼šè´Ÿè´£å­åº”ç”¨çš„æ³¨å†Œï¼Œå…¬å…±å†…å®¹å±•ç¤ºï¼ˆCommon Headerã€Common Menuã€Common Footerç­‰ï¼‰
- å­åº”ç”¨ï¼šè´Ÿè´£è‡ªèº«ä¸šåŠ¡ç›¸å…³çš„å†…å®¹å±•ç¤º

#### 9.3.å¼‚æ„ç³»ç»Ÿæ•´åˆ

- åœ¨é‡‘èé¢†åŸŸå…¬å¸ï¼Œæœ‰å¾ˆå¤šå­˜é‡ç³»ç»Ÿï¼Œä¸€ä½“åŒ–çš„éœ€æ±‚è¶Šæ¥è¶Šå¼ºçƒˆï¼Œå¦‚æœå»æ”¹é€ è¿™äº›ç³»ç»Ÿï¼Œæˆæœ¬ä¼šå¾ˆé«˜ï¼Œè€Œä¸”é£é™©ä¹Ÿå¾ˆå¤§ï¼ŒGodzillaæ”¯æŒå°†å­˜é‡ç³»ç»Ÿæ•´åˆåˆ°ä¸€ä¸ªå¹³å°ä¸Šæ¥ï¼Œè€Œä¸”æ”¹é€ å·¥ä½œé‡å¾ˆå°ï¼Œé£é™©ä¹Ÿå¾ˆä½ï¼Œä½†å´èƒ½æä¾›å¾ˆå¥½çš„ä¸€ä½“åŒ–ä½“éªŒã€‚

![](images/%E5%BC%82%E6%9E%84%E7%B3%BB%E7%BB%9F%E6%95%B4%E5%90%88-b75ed7ca08f19f41004f50dad7a6851e.png)

#### 9.4.å¤šå›¢é˜Ÿç‹¬ç«‹å¼€å‘

- åœ¨ä¸­åå°é¢†åŸŸï¼Œç³»ç»Ÿéƒ½ä¼šæ¯”è¾ƒå¤æ‚ï¼Œæœ‰å¯èƒ½ä¸€ä¸ªç³»ç»Ÿè¦åˆ†ä¸ºå‡ æ¡äº§å“çº¿å’Œä¸šåŠ¡çº¿ï¼Œå¼€å‘æˆå‘˜å°åˆ™åå‡ å·äººï¼Œå¤šåˆ™ä¸Šç™¾å·äººï¼Œå›¢é˜Ÿè¶Šå¤§ï¼Œç®¡ç†çš„æˆæœ¬è¶Šé«˜ï¼ŒGodzillaæ”¯æŒå¾®å‰ç«¯æ¶æ„ï¼Œå¯ä»¥å°†ä¸€ä¸ªå¤æ‚ç³»ç»Ÿæ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªå­ç³»ç»Ÿï¼Œæ¯ä¸ªå­ç³»ç»Ÿå„è´Ÿè´£ä¸€ä¸ªæ¨¡å—ï¼Œä»è€Œå¯ä»¥å°†å¤§çš„å¼€å‘å›¢é˜Ÿæ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„å°å›¢é˜Ÿï¼Œå„è´Ÿè´£ä¸€ä¸ªäº§å“çº¿æˆ–ä¸šåŠ¡çº¿ï¼Œæ—¢èƒ½é™ä½ç®¡ç†çš„æˆæœ¬ï¼Œåˆèƒ½æé«˜å¼€å‘æ•ˆç‡ï¼ŒåŠ é€Ÿé¡¹ç›®è¿­ä»£ã€‚

![](images/%E5%A4%9A%E5%9B%A2%E9%98%9F%E5%BC%80%E5%8F%91-13eb16cb98b61b8a98723a3f9a6564a8.png)

#### 9.5.å¾®åº”ç”¨çš„æ¥å…¥ç®¡ç†

- æ–°å¢åº”ç”¨çš„é…ç½®ï¼Œåœ¨æ‰“å¼€[åº”ç”¨ç®¡ç†]èœå•ï¼Œé…ç½®é€‰é¡¹ã€‚

![](images/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-%E6%96%B0%E5%A2%9E%E6%99%AE%E9%80%9A%E5%AD%90%E5%BA%94%E7%94%A8-051a3ef92051d45ac4c53f246555f438.png)

- å…¶æ¬¡ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªèœå•ï¼Œæ‰“å¼€ layouts å¹¶æ–°å¢ä¸€ä¸ªèœå•ï¼ˆç›®å‰éƒ½æ˜¯é™æ€èœå•ï¼Œå°†æ¥æ”¹ä¸ºåŠ¨æ€èœå•æ—¶å¯é€šè¿‡ç•Œé¢é…ç½®ï¼‰ï¼Œå‚è€ƒ[è·¯ç”±å’Œèœå•](###6.è·¯ç”±å’Œèœå•çš„ç®¡ç†)ï¼Œèœå•ä¿¡æ¯å¦‚ä¸‹:

```javascript
// src/app/layouts/index.ts
  {
    "id": 30, // æ–°å¢ä¸€çº§èœå•ï¼ˆå­åº”ç”¨ï¼‰
    "pId": 30,
    "icon": "chanpinguanli", // èœå•å›¾æ ‡
    "appId": "portal", // ç»Ÿä¸€ä¸º portal
    "name": "å­åº”ç”¨"
  },
  {
    "id": 31, // èœå•IDï¼Œéœ€è¦å”¯ä¸€
    "pId": 30, // çˆ¶çº§èœå•ID
    "name": "ç™¾åº¦", // èœå•åç§°
    "appId": "baidu", // åº”ç”¨
    "url": "" // ç”±äºè¿™ä¸ªå­åº”ç”¨åªæœ‰ä¸€ä¸ªèœå•ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®èœå•URLï¼Œèœå•URLå·²ç»åœ¨åº”ç”¨æ¥å…¥é‚£é‡Œé…ç½®äº†
  },
```

- æœ€åï¼Œå¹¶åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢äº†ä¸€ä¸ªä¸€çº§èœå•[å­åº”ç”¨]å’Œå¯¹åº”çš„äºŒçº§èœå•[ç™¾åº¦]

![](images/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-%E6%96%B0%E5%A2%9E%E7%99%BE%E5%BA%A6%E9%A1%B5%E9%9D%A2-70de98a4e992484e4ca21de1cfc36413.png)

æ³¨æ„ï¼Œéœ€è¦é€šè¿‡ 127.0.0.1 è®¿é—®ï¼Œè€Œä¸èƒ½é€šè¿‡ localhost è®¿é—®ï¼Œå¦åˆ™å¯èƒ½å‡ºç°é¡µé¢è®¿é—®ä¸äº†çš„æƒ…å†µ

#### 9.6.å­åº”ç”¨å•ç‹¬çš„å·¥ç¨‹

- æ–°å»ºçš„å­åº”ç”¨ï¼Œèƒ½ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ã€‚
- åœ¨ä¿®æ”¹ config/config.js é…ç½®æ–‡ä»¶ï¼Œå°† APP_ID ç”±`portal`æ”¹ä¸º`godzillaPro`ï¼Œå°† isPortal è®¾ç½®ä¸º`false`ï¼ˆæˆ–è€…åˆ é™¤è¿™ä¸ªé…ç½®é¡¹ï¼‰ï¼Œå°† devServerPort è®¾ç½®ä¸º`8889`(æˆ–è€…å…¶å®ƒç«¯å£)
- åŠ å­åº”ç”¨çš„æµ‹è¯•èœå•ï¼ŒåŒæ ·åœ¨ layouts å¢åŠ é™æ€èœå•ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ appId å¿…é¡»ä¸º godzillaProï¼ˆä¹Ÿå³å­åº”ç”¨çš„ IDï¼‰ï¼Œä»¥ä¸‹ä¸ºç¤ºä¾‹èœå•ï¼ŒæŒ‰ç…§è¿™ç§æ•°æ®ç»“æ„å¯å¢åŠ å…¶å®ƒèœå•

```javascript
({
  "id": 38,
  "pId": 30,
  "name": "godzillaPro-ç”¨æˆ·ç®¡ç†",
  "appId": "godzillaPro",
  "url": "sample/table/User"
},
{
  "id": 39,
  "pId": 30,
  "name": "godzillaPro-åº”ç”¨æ¥å…¥",
  "appId": "godzillaPro",
  "url": "system/Application"
})
```

- æœ€åï¼Œå¯åŠ¨ godzilla-proï¼Œè®¿é—®[http://127.0.0.1:8889](http://127.0.0.1:8889) è¿™ä¸ªå­åº”ç”¨å°±è·‘èµ·æ¥äº†ï¼Œè¿™ä¸ªå­åº”ç”¨å¯ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²

![](images/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-%E5%AD%90%E5%BA%94%E7%94%A8%E8%AE%BF%E9%97%AE-308f05641b28d6b26dd7766d36a127c3.png)

#### 9.7.å¤šä¸ªå­åº”ç”¨æ¥å…¥portalå¹³å°(ä¸»åº”ç”¨)

- ç»Ÿä¸€è®¿é—®å…¥å£
- å¤šåº”ç”¨ç®¡ç†

![](images/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-%E9%9B%86%E6%88%90%E5%AD%90%E5%BA%94%E7%94%A8-71e114c3bbfb35d26755997956ae46a3.png)

#### 9.8.å¾®å‰ç«¯çš„ç‰¹æ€§

- å­åº”ç”¨æ”¯æŒ Reactæ¡†æ¶(å…¶å®ƒæ¡†æ¶é€šè¿‡iframeæ¥å…¥)
- æ¡†æ¶åº”ç”¨åªéœ€ä¾èµ– npm åŒ… @gza/quantex-scaffoldï¼Œä¸è€¦åˆä»»ä½•å·¥ç¨‹ä½“ç³»
- å­åº”ç”¨ç‹¬ç«‹å¼€å‘ã€ä¸è€¦åˆä»»ä½•å·¥ç¨‹ä½“ç³»ï¼Œå·²æœ‰åº”ç”¨è¿ç§»æˆæœ¬æä½
- æ•´ä¸ªç³»ç»Ÿç”¨æˆ·ä½“éªŒå¥½ï¼Œè·Ÿ SPA åº”ç”¨åŸºæœ¬ä¸€è‡´
- å­åº”ç”¨åªéœ€å‘å¸ƒå‰ç«¯èµ„æº bundle å³å¯ï¼Œæ¡†æ¶åº”ç”¨é€šè¿‡ bundle æ¸²æŸ“å­åº”ç”¨

------

## 10.ä¸ªæ€§åŒ–å·¥ä½œå°

#### 10.1æ¦‚è¿°

- å·¥ä½œå°åˆ†ä¸ºä¸ªäººå·¥ä½œå°å’Œç³»ç»Ÿå·¥ä½œå°ï¼ˆç³»ç»Ÿåœºæ™¯ï¼‰ï¼Œä¸ªäººå·¥ä½œå°é¡¾åæ€ä¹‰å°±æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„å·¥ä½œå°ï¼Œç³»ç»Ÿå·¥ä½œå°å°±æ˜¯ç”±è¿ç»´äººå‘˜äº‹å…ˆå®šä¹‰å¥½çš„å·¥ä½œå°ï¼Œå…¶å®ƒäººå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ˆæˆæƒåå¯ä½¿ç”¨ï¼‰ã€‚

- å·¥ä½œå°ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨åŒ…å«å¾ˆå¤šé¢æ¿ï¼Œæ¯ä¸€ä¸ªé¢æ¿å¯ä»¥æ‰¿è½½ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶ï¼Œé¢æ¿å¯ä»¥éšæ„ç¼©æ”¾å¤§å°ï¼Œé¢æ¿ä¸é¢æ¿ä¹‹å‰å¯ä»¥ç›¸äº’è”åŠ¨ã€‚å·¥ä½œå°æˆ–è€…é¢æ¿åªæ˜¯æä¾›ä¸€ä¸ªå£³ï¼Œè¿™ä¸ªæ˜¯æ¡†æ¶å·²ç»æ”¯æŒäº†ï¼Œä½†æ˜¯é‡Œé¢çš„ç»„ä»¶æ˜¯éœ€è¦å¼€å‘ã€‚

- å·¥ä½œå°ä¸­çš„ç»„ä»¶å¯ä»¥æ¥è‡ªäºä¸åŒçš„å­åº”ç”¨ï¼Œæˆ–é¡µé¢ç»„ä»¶ã€‚

#### 10.2.æ–°å¢å·¥ä½œå°å¸ƒå±€

- æ–°å¢å·¥ä½œå°å¯é€‰æ‹©ä¸åŒå¸ƒå±€å’Œç³»ç»Ÿåœºæ™¯ã€‚
- å¯é…ç½®å·¥ä½œå°åç§°å’Œé»˜è®¤å·¥ä½œå°ç­‰å±æ€§ã€‚

![](images/%E5%B7%A5%E4%BD%9C%E5%8F%B0%E8%9E%8D%E5%90%88-%E6%96%B0%E5%A2%9E%E5%B7%A5%E4%BD%9C%E5%8F%B0-af4819ae86a340651b984990faefee8a.png)

- æ–°å»ºçš„TSPå·¥ä½œå°çš„é¡µé¢å¸ƒå±€

![image-20220814171642380](images/image-20220814171642380.png)

#### 10.3.åœ¨å·¥ä½œå°ä¸­æ·»åŠ ç»„ä»¶åº“

- æ·»åŠ çš„ç»„ä»¶åº“å¯ä»¥æ˜¯ pages é¡µé¢æˆ–å­åº”ç”¨ã€‚

![image-20220814171800690](images/image-20220814171800690.png)

- æˆåŠŸæ·»åŠ å·¥ä½œå°ç»„ä»¶

![image-20220814171912440](images/image-20220814171912440.png)

#### 10.4.å®Œæ•´çš„å·¥ä½œå°ç»„ä»¶é¡µé¢ç¤ºä¾‹

![](images/%E5%89%8D%E7%AB%AF%E5%B7%A5%E4%BD%9C%E5%8F%B0%E5%9B%BE-1d2c07b431e39f7d5727a6172d617f48.png)

#### 10.5.å·¥ä½œå°ç»„ä»¶çš„å‚æ•°å­˜å‚¨æ¨¡å¼å›¾

![](images/saveParams-b5cf5a1167c235ae60b6c6de6cc70b96.png)

#### 10.6.å·¥ä½œå°ç»„ä»¶é—´é€šä¿¡æ¨¡å¼å›¾

![](https://godzilla-doc.iquantex.com/assets/images/%E5%B7%A5%E4%BD%9C%E5%8F%B0%E8%9E%8D%E5%90%88-%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF-f7327032f94403a65ca76e2b87991a44.png)

- å·¥ä½œå°å­åº”ç”¨ä¹‹é—´çš„é€šä¿¡æŠ€æœ¯ç¤ºä¾‹ä»£ç ï¼š

  1. å‘é€äº‹ä»¶ï¼šç¤ºä¾‹ï¼šå­ç³»ç»Ÿ A å‘é€ã€æ”¹å˜ç”¨æˆ·æƒé™ã€‘äº‹ä»¶

  ```javascript
  sendWorkbenchEvent = props => {
    window.isInWorkbench &&
      window.parent.postMessage(
        {
          // ç±»å‹ï¼Œæ ‡è¯†ä¸ºå·¥ä½œå°äº‹ä»¶ï¼Œå†™æ­»
          type: 'workbenchEvent', // ç±»å‹ï¼Œæ ‡è¯†ä¸ºå·¥ä½œå°äº‹ä»¶
          // ç›®æ ‡åº”ç”¨Idï¼Œå‘é‚£ä¸ªåº”ç”¨å‘é€äº‹ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™å‘æ‰€æœ‰iframeå‘é€äº‹ä»¶
          appId: 'godzillaPro2',
          // å·¥ä½œå°Idï¼Œè¿™ä¸ªå‚æ•°ä¼šåœ¨åŠ è½½iframeçš„æ—¶å€™ï¼Œé€šè¿‡urlä¼ ç»™å­ç³»ç»Ÿ
          // æŒ‡å®šäº‹ä»¶åªä¼šå‘æ‰€åœ¨çš„å·¥ä½œå°ä¸­çš„å…¶å®ƒiframeå‘é€ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™å‘æ‰€æœ‰iframeå‘é€
          // window._workbenchId,è¿™ä¸ªå˜é‡å°±æ˜¯ä»urlè·å–åˆ°ï¼Œç„¶åå­˜å‚¨åœ¨windowå¯¹è±¡
          workbenchId: window._workbenchId,
          // é¢æ¿Idï¼Œï¼Œè¿™ä¸ªå‚æ•°ä¼šåœ¨åŠ è½½iframeçš„æ—¶å€™ï¼Œé€šè¿‡urlä¼ ç»™å­ç³»ç»Ÿ
          // æŒ‡å®šäº‹ä»¶ä¸ä¼šå‘è‡ªèº«åº”ç”¨å‘é€ï¼Œä¹Ÿå³è‡ªèº«å³ä½¿ç›‘å¬äº†è¯¥äº‹ä»¶ï¼Œä¹Ÿä¸ä¼šæ”¶åˆ°äº‹ä»¶
          // window._layoutItemId,è¿™ä¸ªå˜é‡å°±æ˜¯ä»urlè·å–åˆ°ï¼Œç„¶åå­˜å‚¨åœ¨windowå¯¹è±¡
          layoutItemId: window._layoutItemId,
          // äº‹ä»¶åç§°ï¼Œå¯ä»¥éšæ„æŒ‡å®šï¼Œä½†è¦ç¡®ä¿å”¯ä¸€ï¼Œäº‹ä»¶è¦æœ‰å«ä¹‰
          eventName: 'userRole-data-changed',
          // æºå¸¦çš„ä¸šåŠ¡æ•°æ®,å¯¹è±¡å­˜å‚¨
          props: {
            type: 'addUser',
            data: {} // useræ•°æ®
          } // æºå¸¦çš„ä¸šåŠ¡æ•°æ®
        },
        '*'
      );
  };
  ```

  2. æ¥æ”¶äº‹ä»¶ï¼šç¤ºä¾‹ï¼šå­ç³»ç»Ÿ B å“åº”ã€æ”¹å˜ç”¨æˆ·æƒé™ã€‘äº‹ä»¶

  ```javascript
  window.addEventListener(
    'message',
    event => {
      const { type, eventName, props } = event.data;
      if (type === 'workbenchEvent') {
        // å‘é€äº‹ä»¶å’Œæ¥æ”¶äº‹ä»¶çš„åç§°è¦ä¸€è‡´
        if (eventName === 'userRole-data-changed') {
          // å“åº”äº‹ä»¶é€»è¾‘
          console.log(data);
        }
      }
    },
    true
  )
  ```

---

## 11.ä¸»é¢˜å¼€å‘

#### 11.1æ¦‚è¿°

Godzilla åŸºäº Ant Design è§†è§‰é£æ ¼æ­å»ºäº† Godzilla Designï¼Œè¿™å¥—é£æ ¼ç»è¿‡è®¾è®¡å¸ˆçš„ç²¾å¿ƒè°ƒé…ï¼Œé€‚åˆå¤§å¤šæ•°ä¸­åå°é¡¹ç›®ã€‚å¦‚æœå¯¹è§†è§‰é£æ ¼æœ‰é¢å¤–çš„è¦æ±‚ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œå®šåˆ¶ã€‚

#### 11.2é»˜è®¤æ·±è‰²ä¸»é¢˜

![image-20220814173321679](images/image-20220814173321679.png)

#### 11.3.è‡ªå®šä¹‰çº¢è‰²ä¸»é¢˜

![image-20220814173151112](images/image-20220814173151112.png)

#### 11.4.å¯è‡ªå®šä¹‰ä¸»é¢˜é…ç½®

```javascript
// åœ¨quantex-scaffoldé¡¹ç›®çš„é…ç½®æ–‡ä»¶config/config.tsä¸­
  themeConfig: {
    // æŒ‡å®šé»˜è®¤ä¸»é¢˜: å¯¹åº”themesä¸­çš„id
    defaultTheme: 'themeDark',
    mainTheme: 'themeDark',
    // ä¸»é¢˜é…ç½®
    themes: [
      // é»˜è®¤ä¸»é¢˜
      {
        // åç§°
        name: 'æ·±è‰²',
        // id
        id: 'themeDark',
        // ä¸»é¢˜æ–‡ä»¶è·¯å¾„
        path: path.join(__dirname, '../packages/quantex-plugin-theme-dark'),
        // chartä¸»é¢˜é…ç½®æ–‡ä»¶
        chartConfig: darkChart,
      },
      // æ·»åŠ è‡ªå®šä¹‰ä¸»é¢˜çš„é…ç½®
      {
        name: 'çº¢è¤è‰²',
        id: 'themeWhiteCCC',
        path: path.join(__dirname, '../packages/quantex-plugin-theme-cicc-white'),
        chartConfig: whiteChart,
      },
    ],
  },
```

#### 11.5.å®ç°èƒŒæ™¯

- åŸºäº Avatar ç»„ä»¶è§„èŒƒ V2.0 å’Œ quantex-desgin çš„è®¾è®¡è§„èŒƒä½“ç³»è¿›è¡Œç»„å»ºä¸»é¢˜å¼€å‘ã€‚

  [Quantex Design_è®¾è®¡è§„èŒƒä½“ç³»](Quantex Design_è®¾è®¡è§„èŒƒä½“ç³».pdf)

  1. quantex-design æ˜¯åŸºäº ant-design çš„äºŒæ¬¡å°è£…ï¼›
  2. ant-design ä½¿ç”¨çš„æ˜¯ less æ–¹å¼ å¤„ç† css;
  3. quantex-scaffold ä½¿ç”¨çš„æ˜¯ sass æ–¹å¼å¤„ç† css;
  4. quantex-scaffold åŒæ—¶ä¼šä¾èµ– ant-design css;
  5. css variables ä¸€å®šç¨‹åº¦ä¸Šå¸æ”¶äº† less/sass å¤„ç† css çš„æ–¹å¼ï¼Œä¸”ä¸»æµæµè§ˆå™¨éƒ½å·²æ”¯æŒï¼›
  6. å› æ­¤åœ¨ç‚¹å‡»ä¸»é¢˜åˆ‡æ¢æŒ‰é’®æ—¶ï¼Œquantex-design å’Œ ant-design æ‰€æœ‰çš„ç»„ä»¶æ ·å¼éƒ½éœ€è¦è¿›è¡Œåˆ‡æ¢ã€‚
  7. ä¸ºå‡å°‘ä»£ç é‡ï¼ŒåŒæ—¶å¯ä»¥å¤ç”¨éƒ¨åˆ†ä»£ç ã€‚å†³å®šä½¿ç”¨ css variables + æ ·å¼è¦†ç›–çš„æ–¹æ¡ˆè¿›è¡Œä¸»é¢˜åˆ‡æ¢çš„å®ç°ã€‚
  8. æ ·å¼è¦†ç›–ï¼šéœ€è¦é’ˆå¯¹æ‰€æœ‰ç»„ä»¶çš„æ‰€æœ‰æ ·å¼è¿›è¡Œè¦†ç›–ã€‚
  9. css variables: æ ·å¼è¦†ç›–ä½¿ç”¨çš„æ ·å¼éœ€è¦ä½¿ç”¨ css variables è¿›è¡Œå®šä¹‰ã€‚
  10. å› æ­¤åœ¨ build å®Œæˆä¹‹åï¼Œä¼šç”Ÿæˆç»„ä»¶ css æ–‡ä»¶ + css variables æ–‡ä»¶ï¼›ä¸»é¢˜åˆ‡æ¢åŠ è½½ä¸åŒ css variables æ–‡ä»¶å³å¯ã€‚

#### 11.6.è‡ªå®šä¹‰ä¸»é¢˜å¼€å‘åŸç†

1. ä½¿ç”¨ css variales å¯¹ç»„ä»¶æ ·å¼è¿›è¡Œè¦†ç›–ï¼›
2. build ç”Ÿæˆç»„ä»¶æ ·å¼æ–‡ä»¶å’Œ css variables æ–‡ä»¶ï¼›
3. ç»„ä»¶æ ·å¼ä½¿ç”¨çš„ css å˜é‡éƒ½å®šä¹‰åœ¨ç»Ÿä¸€çš„ css variables æ–‡ä»¶ä¸­ï¼›
4. åˆ‡æ¢ä¸»é¢˜å³åŠ è½½ä¸åŒ css variables æ–‡ä»¶ï¼›
5. åŒæ—¶è‡ªå®šä¹‰ä¸»é¢˜åªéœ€è¦æ ¹æ®ç°æœ‰ css variables æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼›

---

## 12.æœåŠ¡ç«¯çš„äº¤äº’

#### 12.1.æ¦‚è¿°

Godzilla UI æ˜¯ä¸€å¥—åŸºäº Reactã€Ant Designã€Mobx æŠ€æœ¯æ ˆçš„å•é¡µé¢åº”ç”¨ï¼Œæˆ‘ä»¬æä¾›çš„æ˜¯å‰ç«¯ä»£ç å’Œæœ¬åœ°æ¨¡æ‹Ÿæ•°æ®çš„å¼€å‘æ¨¡å¼ï¼Œé€šè¿‡ API çš„å½¢å¼å’Œä»»ä½•æŠ€æœ¯æ ˆçš„æœåŠ¡ç«¯åº”ç”¨ä¸€èµ·å·¥ä½œã€‚åœ¨ Godzilla UI ä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„å‰ç«¯ UI äº¤äº’åˆ°æœåŠ¡ç«¯å¤„ç†æµç¨‹æ˜¯è¿™æ ·çš„ï¼š

- UI ç»„ä»¶äº¤äº’æ“ä½œï¼›
- è°ƒç”¨ Store.js çš„å¤„ç†å‡½æ•°ï¼ˆæ¯ä¸ªç»„ä»¶æœ‰ç‹¬ç«‹çš„ storeï¼‰ï¼›
- ä½¿ç”¨å°è£…çš„ API å‘é€è¯·æ±‚ï¼›
- è·å–æœåŠ¡ç«¯è¿”å›ï¼›
- ç„¶åè°ƒç”¨ action å‡½æ•°æ”¹å˜ mobx å¯¹è±¡ï¼›
- é¡µé¢è‡ªåŠ¨é‡æ–° renderã€‚

ä»ä¸Šé¢çš„æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ç»´æŠ¤ï¼Œç»Ÿä¸€çš„è¯·æ±‚å¤„ç†éƒ½æ”¾åœ¨ `Store.js` è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªé¡µé¢ç»„ä»¶çš„æ‰€æœ‰ä¸åç«¯çš„äº¤äº’éƒ½æ”¾åœ¨è¿™é‡Œç»Ÿä¸€ç®¡ç†ã€‚

å…¶ä¸­ï¼Œ`quantex-utils/API` æ˜¯åŸºäº [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch) çš„å°è£…ï¼Œä¾¿äºç»Ÿä¸€å¤„ç† POSTï¼ŒGETã€DELETEã€PUT ç­‰è¯·æ±‚å‚æ•°ï¼Œè¯·æ±‚å¤´ï¼Œä»¥åŠé”™è¯¯æç¤ºä¿¡æ¯ç­‰ã€‚

**å°è£…çš„ API ç±»åº“ï¼Œå³å¼€ç®±ä½¿ç”¨ï¼Œç¼–å†™ç®€å•ï¼Œä»£ç ä½è€¦åˆï¼Œä½¿ç”¨æ–¹ä¾¿**ã€‚

ä¾‹å¦‚åœ¨ Store ä¸­çš„ä¸€ä¸ªè¯·æ±‚ç”¨æˆ·ä¿¡æ¯çš„ä¾‹å­ï¼š

```javascript
// Store.js
import { observable, action } from 'mobx';
import { API } from '@gza/quantex-utils';
class Store {
  api;
  constructor() {
    this.api = new API('auth');
  }
  // è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯
  getUserInfos = () => {
    return this.api.get('/api/v2/user_infos/current_user');
  };
}
export default Store;
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ¥å£è°ƒå–
// index.js
import React, { Component } from 'react';
import { observer } from 'mobx-react';
import { Alert } from '@gza/quantex-design';
import Store from './Store';
@observer
class LoginContainerComponent extends Component {
  store = new Store();
  componentDidMount() {
    this.store.getUserInfos().then(res => {
      if (res.code == 200) {
        // å¤„ç†ä¸šåŠ¡é€»è¾‘
      } else {
        // é”™è¯¯å¼¹å‡ºæ¡†
        Alert.error(res.msg);
      }
    });
  }
  render() {
    return (
      <div></div>
    );
  }
}
export default LoginContainerComponent;
```

Mock æ•°æ®æ˜¯å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œæ˜¯åˆ†ç¦»å‰åç«¯å¼€å‘çš„å…³é”®é“¾è·¯ã€‚é€šè¿‡é¢„å…ˆè·ŸæœåŠ¡å™¨ç«¯çº¦å®šå¥½çš„æ¥å£ï¼Œæ¨¡æ‹Ÿè¯·æ±‚æ•°æ®ç”šè‡³é€»è¾‘ï¼Œèƒ½å¤Ÿè®©å‰ç«¯å¼€å‘ç‹¬ç«‹è‡ªä¸»ï¼Œä¸ä¼šè¢«æœåŠ¡ç«¯çš„å¼€å‘æ‰€é˜»å¡ã€‚Godzilla æ¡†æ¶å†…ç½®äº†ä¸¤ç§Mockæ•°æ®çš„æ–¹å¼ï¼š

1. UI ç«¯æœ¬åœ°Mockæ•°æ®ã€‚ï¼ˆé€šè¿‡çº¦å®šåœ¨pagesæ–‡ä»¶å¤¹ä¸‹çš„__mock.(js|ts)_æ–‡ä»¶æ¥å®ç°ï¼‰
2. yapiï¼ˆåç«¯å¼€å‘äººå‘˜åœ¨yapiå¹³å°å®šä¹‰apiï¼Œå‰ç«¯åœ¨configä¸­é…ç½®å³å¯å¯¹yapiä¸­éƒ¨ç½²çš„mock apiè¿›è¡Œè”è°ƒï¼‰

#### 12.2.UI ç«¯æœ¬åœ°Mockæ•°æ®

- Godzilla æ¡†æ¶çº¦å®š pages æ–‡ä»¶å¤¹ä¸‹çš„ _mock. ( ts | js ) æ–‡ä»¶å³ mock æ–‡ä»¶ï¼Œæ–‡ä»¶å¯¼å‡ºæ¥å£å®šä¹‰ï¼Œæ”¯æŒåŸºäº require åŠ¨æ€åˆ†æçš„å®æ—¶åˆ·æ–°ï¼Œæ”¯æŒ TS è¯­æ³•ï¼Œä»¥åŠå‹å¥½çš„å‡ºé”™æç¤ºï¼ŒåŸºäº[mocker-api](https://github.com/jaywcjlove/mocker-api)å°è£…

```javascript
// **/_mock.js æˆ–è€… **/_mock.ts
module.exports = {
  'GET /api/users/list': { code: 200, data: { list: [1, 2] }, msg: '' },
  'GET /api/users/1': { code: 200, data: { id: 1 }, msg: '' },
  // æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼ŒAPI å‚è€ƒ mocker-api
  'POST /api/users/create': (req, res) => {
    res.end('OK');
  }
};
```

#### 12.3.Yapiçš„æ¥å£ç®¡ç†å’Œæ•°æ®è½¬å‘

- YApi æ˜¯**é«˜æ•ˆ**ã€**æ˜“ç”¨**ã€**åŠŸèƒ½å¼ºå¤§**çš„ api ç®¡ç†å¹³å°ï¼Œæ—¨åœ¨ä¸ºå¼€å‘ã€äº§å“ã€æµ‹è¯•äººå‘˜æä¾›æ›´ä¼˜é›…çš„æ¥å£ç®¡ç†æœåŠ¡ã€‚å¯ä»¥å¸®åŠ©å¼€å‘è€…è½»æ¾åˆ›å»ºã€å‘å¸ƒã€ç»´æŠ¤ APIï¼ŒYApi è¿˜ä¸ºç”¨æˆ·æä¾›äº†ä¼˜ç§€çš„äº¤äº’ä½“éªŒï¼Œå¼€å‘äººå‘˜åªéœ€åˆ©ç”¨å¹³å°æä¾›çš„æ¥å£æ•°æ®å†™å…¥å·¥å…·ä»¥åŠç®€å•çš„ç‚¹å‡»æ“ä½œå°±å¯ä»¥å®ç°æ¥å£çš„ç®¡ç†ã€‚

- Godzilla æ¡†æ¶çº¦å®šåœ¨config/config.tsçš„é…ç½®æ–‡ä»¶ä¸­å¯¹Yapiçš„é…ç½®ã€‚

  ```javascript
  import {IConfig} from '@/types';
  const isDev = process.env.NODE_ENV === 'development';
  const config: IConfig = {
    yapiConfig:{
      // å¯åŠ¨ä½¿ç”¨
      enable: true,
      // yapiç½‘ç«™è·¯å¾„ï¼Œå¦‚ï¼šhttps://yapi.iquantex.com
      host: isDev ? 'https://yapi.iquantex.com' : '',
      // éœ€è¦ mock çš„é¡¹ç›® token
      token: 'e242af77e127a96f8b8eaa0fd92f276b0f2931cd9a73c60d438a1f79378f7ab3',
      // å¯åŠ¨è‡ªåŠ¨æ›´æ–°æ¥å£åŠŸèƒ½
      autoUpdate: true,
      // é—´éš”æ—¶é—´ï¼Œé»˜è®¤äº”åˆ†é’Ÿ
      interval: 5 * 60 * 1000,
    }
  };
  module.exports = config;
  ```

#### 12.4.Yapiå¹³å°çš„æ¥å£ç®¡ç†

- Yapiå¹³å°çš„æ¥å£ç®¡ç†

![](images/image-20220814180158554.png)

- å¯æœŸæœ›Mockæ–­è¨€è¿”å›æ•°æ®æ ¼å¼

![image-20220814180338050](images/image-20220814180338050.png)

![image-20220814180431026](images/image-20220814180431026.png)

- Yapiå¯ä»¥å¯¹æ¥å£çš„æµ‹è¯•åŠæ–­è¨€

![image-20220814180706094](images/image-20220814180706094.png)

![image-20220814180754895](images/image-20220814180754895.png)

- å¤šäººååŒå¼€å‘

![image-20220814180936606](images/image-20220814180936606.png)

- Yapiå¹³å°çš„ç‰¹æ€§

  1. åŸºäº Json5 å’Œ Mockjs å®šä¹‰æ¥å£è¿”å›æ•°æ®çš„ç»“æ„å’Œæ–‡æ¡£ï¼Œæ•ˆç‡æå‡å¤šå€

  2. æ‰å¹³åŒ–æƒé™è®¾è®¡ï¼Œå³ä¿è¯äº†å¤§å‹ä¼ä¸šçº§é¡¹ç›®çš„ç®¡ç†ï¼Œåˆä¿è¯äº†æ˜“ç”¨æ€§

  3. ç±»ä¼¼ postman çš„æ¥å£è°ƒè¯•
  4. è‡ªåŠ¨åŒ–æµ‹è¯•, æ”¯æŒå¯¹ Response æ–­è¨€
  5. MockServer é™¤æ”¯æŒæ™®é€šçš„éšæœº mock å¤–ï¼Œè¿˜å¢åŠ äº† Mock æœŸæœ›åŠŸèƒ½ï¼Œæ ¹æ®è®¾ç½®çš„è¯·æ±‚è¿‡æ»¤è§„åˆ™ï¼Œè¿”å›æœŸæœ›æ•°æ®
  6. æ”¯æŒ postman, har, swagger æ•°æ®å¯¼å…¥
  7. å…è´¹å¼€æºï¼Œå†…ç½‘éƒ¨ç½²ï¼Œä¿¡æ¯å†ä¹Ÿä¸æ€•æ³„éœ²

---

## 13.é¡¹ç›®æ‰“åŒ…

#### 13.1.æ¦‚è¿°

é¡¹ç›®çš„è¿è¡Œå’Œç¼–è¯‘ç¯å¢ƒçš„æ˜¯åŸºäºwebpackæ„å»ºå·¥å…·çš„äºŒæ¬¡å¼€å‘çš„ quantex-scripts å®Œæˆçš„ã€‚

quantex-scripts æœ‰ä¸€æ•´å¥—çš„æœºåˆ¶å»æ›´å¥½çš„å¤„ç†é¡¹ç›®ä¸­çš„æ–‡ä»¶å‹ç¼©ï¼Œæ–‡ä»¶è·¯å¾„åˆ«åï¼Œé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„çƒ­æ›´æ–°ç­‰ï¼Œæ›´å¥½çš„æå‡å¼€å‘æ•ˆç‡ã€‚

åœ¨æ‰§è¡Œæ‰“åŒ…å‘½ä»¤æˆåŠŸä¹‹åï¼Œä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆ dist æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å°±æ˜¯æ„å»ºæ‰“åŒ…å¥½çš„æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ *.jsã€*.cssã€index.html ç­‰é™æ€æ–‡ä»¶,ç„¶åå°±å¯ä»¥å°†è¿™äº›é™æ€èµ„æºæ–‡ä»¶æ‹·è´åˆ° CDNã€nginx ç­‰é™æ€èµ„æºæœåŠ¡å™¨éƒ¨ç½²åº”ç”¨ã€‚

#### 13.2.quantex-scripts æ‰€æœ‰å‘½ä»¤

```shell
npm start
# æ‰§è¡Œé¡µé¢å…¥å£æ£€æŸ¥ï¼Œéå† app/containers/page ä¸‹æ‰€æœ‰ index.jsx or index.tsx æ–‡ä»¶ï¼Œç”Ÿæˆçš„é¡µé¢è·¯å¾„ä¿å­˜åœ¨ app/containers/page/page.json æ–‡ä»¶ä¸­
# æ‰§è¡Œ npm run dev

npm run dev
# æ‰§è¡Œ quantex-scripts start
# è¯»å– quantex çš„ dev é…ç½®æ–‡ä»¶
# å¯åŠ¨å¼€å‘ç¯å¢ƒä¸‹çš„ webpack ç¼–è¯‘

npm run dist (dist:base | dist:pre | dist:prod)
# production(ç”Ÿäº§)ä¸‹æ‰“åŒ…ï¼Œæ‰“åŒ… app åˆ° dist ç›®å½•ä¸‹ï¼Œå…¥å£æ–‡ä»¶ app/index.js

npm run analyze
# åˆ†ææ‰“åŒ…åçš„ bundle size ä»¥åŠ åŒ…å« çš„ chunk æ¨¡å—
# æ‰“åŒ…åä¼šå¼€å¯ä¸€ä¸ªæœ¬åœ° 10086 ç«¯å£ï¼Œlocalhost:10086 å¯è®¿é—®é¡µé¢æŸ¥çœ‹

npm run dll
# é¢„ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“ï¼Œæ‰“åŒ…åä¼šç”Ÿæˆ manifest.json å’Œ lib.js åˆ° build ç›®å½•

npm run dll:prod
# é¢„ç¼–è¯‘ä¸‹å°†ä¼šæ‰§è¡Œ uglify æ“ä½œ

npm run lint
# æ£€æŸ¥ js ä»£ç é£æ ¼

npm run lint:fix
# æ£€æŸ¥ js æ–‡ä»¶é£æ ¼å¹¶æ‰§è¡Œä¿®æ­£

npm run postdist:pre (pre ç¯å¢ƒ)
# npm run install-build-dependencies â€”> å®‰è£… dist åŒ…ä¸‹ electron ä¾èµ–
# æ‹·è´ app/_config/pre/api.js åˆ° dist/assets/js ä¸‹

npm run postdist:prod (prod ç¯å¢ƒ)
# npm run install-build-dependencies` â€”> å®‰è£… dist åŒ…ä¸‹ electron ä¾èµ–
# æ‹·è´ app/_config/prod/api.js åˆ° dist/assets/js ä¸‹

npm run start-components-debug
# å¯åŠ¨ quantex-design åœ¨å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•æ¨¡å¼ quantex-scripts ä¼šä¿®æ”¹ alias é…ç½®ï¼ŒæŠŠ quantex-design çš„å¼•ç”¨æŒ‡å‘ design ç›®å½•

npm run build-comp-ids
# é’ˆå¯¹æ¯ä¸ª index.jsx å…¥å£ç”Ÿæˆå”¯ä¸€ TableIdï¼Œå¹¶ä¿å­˜åœ¨ app/common/compIds.json ä¸­

npm run build-page-path
# npm start æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œè‡ªåŠ¨ç”Ÿæˆé¡µé¢å…¥å£è·¯å¾„ json, ä¿å­˜åœ¨ app/container/page/path.json ä¸‹
```